@(slots:List[Slot], rooms:List[Room])(implicit lang: Lang, req: RequestHeader)

@views.html.Publisher.devoxxBE2014(Messages("sw.show.mon")) {
    <div class="large-12 columns">
        <h1 class="entry-title">@Messages("sw.show.title.mon")</h1>

        <p class="breadcrumb"><a href="@routes.Publisher.homePublisher()">@Messages("sw.home")</a> &gt;
            <strong>@Messages("sw.agenda.mon")</strong> /
            <a href="@routes.Publisher.showByDay("tue")">@Messages("sw.agenda.tue")</a> /
            <a href="@routes.Publisher.showByDay("wed")">@Messages("sw.agenda.wed")</a> /
            <a href="@routes.Publisher.showByDay("thu")">@Messages("sw.agenda.thu")</a> /
            <a href="@routes.Publisher.showByDay("fri")">@Messages("sw.agenda.fri")</a>
        </p>

    </div>

    <div class="columns large-12 woocommerce">
        <table class="agendaTable">
            <tr>
                <th><i class="icon-time"></i> Room</th>
                @rooms.map { roomName: Room =>
                    <td>@roomName.name</td>
                }
                </tr>

            @slots.groupBy(_.from).toList.sortBy(_._1.toDate.getTime).map { case (time: org.joda.time.DateTime, subSlots) =>
            <tr>
                <th class="timeSlot">
                    @time.toString("HH:mm") - @slots.head.to.toString("HH:mm")
                </th>
                @rooms.map { room =>
                    <td class="room @room.id">
                    @subSlots.find(_.room.id == room.id).map { zeSlot: Slot =>
                            @zeSlot.notAllocated
                            @zeSlot.proposal.map { p: Proposal =>
                                <span class="track"> @tags.publisher.renderIconForTrack(p.track) @Messages(p.track.label)</span>
                                <span class="title"><a href="@routes.Publisher.showDetailsForProposal(p.id, p.escapedTitle)">@p.title</a></span>
                                <span class="speaker"> @p.allSpeakerUUIDs.map { speakerUUID =>
                                    @tags.publisher.renderSpeaker(speakerUUID)
                                }</span>
                            }
                            @if(zeSlot.proposal.isEmpty && zeSlot.break.isEmpty) {
                                TBA
                            }
                            @if(zeSlot.break.isDefined) {
                                @zeSlot.break.get.nameEN
                            }
                    }
                    </td>
                }




            </tr>
            }
            <tr>
                <th><i class="icon-time"></i> Room</th>
                @slots.groupBy(_.room).keys.toList.sortBy(_.id).map { roomName: Room =>
                    <td>@roomName.name</td>
                }
            </tr>
        </table>


    </div>
}